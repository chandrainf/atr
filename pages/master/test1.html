<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataTable Example</title>
    <!-- Include DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.css">
    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- Include DataTables JS -->
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.js"></script>
</head>
<body>
    <div class="cards">
        <div>Total Cetak Sertipikat: <span id="totalCetakSertipikat">0</span></div>
        <div>Total Verifikasi Sentuh Tanahku: <span id="totalVerifikasiSentuhTanahku">0</span></div>
        <div>Combined Total: <span id="combinedTotal">0</span></div>
    </div>
    <table id="example1" class="display">
        <thead>
            <tr>
                <th>Nomor Mesin</th>
                <th>Lokasi</th>
                <th>Cetak Sertipikat</th>
                <th>Verifikasi Sentuh Tanahku</th>
                <th>Tanggal Transaksi</th>
                <th>Total Transaksi</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>K2300012</td>
                <td>Kantor Pertanahan Kota Administratif Jakarta Pusat</td>
                <td>20</td>
                <td>10</td>
                <td>2024-06-11</td>
                <td></td>
            </tr>
            <tr>
                <td>K2300013</td>
                <td>Kantor Pertanahan Kota Surabaya I</td>
                <td>20</td>
                <td>10</td>
                <td>2024-06-11</td>
                <td></td>
            </tr>
            <tr>
                <td>K2300014</td>
                <td>Kantor Pertanahan Kota Surabaya II</td>
                <td>20</td>
                <td>10</td>
                <td>2024-06-11</td>
                <td></td>
            </tr>
            <tr>
                <td>K2300015</td>
                <td>Kantor Wilayah Badan Pertanahan Nasional Provinsi Kalimantan Timur</td>
                <td>20</td>
                <td>10</td>
                <td>2024-06-11</td>
                <td></td>
            </tr>
            <tr>
                <td>K2300016</td>
                <td>Kantor Wilayah Badan Pertanahan Nasional Provinsi Kalimantan Timur</td>
                <td>20</td>
                <td>10</td>
                <td>2024-06-11</td>
                <td></td>
            </tr>
        </tbody>
    </table>

    <script>
        $(document).ready(function () {
            $("#example1").DataTable({
                "initComplete": function(settings, json) {
                    updateTotalTransaksi();
                }
            });

            function updateTotalTransaksi() {
                const rows = document.querySelectorAll("#example1 tbody tr");

                let totalCetakSertipikat = 0;
                let totalVerifikasiSentuhTanahku = 0;

                rows.forEach((row) => {
                    const cetakSertipikat = parseInt(row.children[2].innerText) || 0;
                    const verifikasiSentuhTanahku = parseInt(row.children[3].innerText) || 0;
                    const totalTransaksi = cetakSertipikat + verifikasiSentuhTanahku;

                    row.children[5].innerText = totalTransaksi;

                    const date = row.children[4].innerText;
                    const today = new Date().toISOString().split("T")[0]; // Get today's date in YYYY-MM-DD format
                    if (date === today) {
                        totalCetakSertipikat += cetakSertipikat;
                        totalVerifikasiSentuhTanahku += verifikasiSentuhTanahku;
                    }
                });

                document.getElementById("totalCetakSertipikat").innerText = totalCetakSertipikat;
                document.getElementById("totalVerifikasiSentuhTanahku").innerText = totalVerifikasiSentuhTanahku;
                document.getElementById("combinedTotal").innerText = totalCetakSertipikat + totalVerifikasiSentuhTanahku;
            }
        });
    </script>
</body>
</html>
