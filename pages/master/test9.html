<!DOCTYPE html>
<html>
  <head>
    <title>Earthquake Effect Markers in Indonesia</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
      #map {
        height: 600px;
      }

      .error-marker {
        width: 35px;
        height: 35px;
        background: red;
        border-radius: 50%;
        box-shadow: 0px 0px 1px 1px #0000001a;
        animation: pulse-animation 1s infinite;
      }

      .maintenance-marker {
        width: 35px;
        height: 35px;
        background: yellow;
        border-radius: 50%;
        box-shadow: 0px 0px 1px 1px #0000001a;
        animation: pulse-animation 1s infinite;
      }

      .normal-marker {
        width: 35px;
        height: 35px;
        background: blue;
        border-radius: 50%;
        box-shadow: 0px 0px 1px 1px #0000001a;
        
      }

      @keyframes pulse-animation {
        0% {
          box-shadow: 0 0 0 0px rgba(0, 0, 0, 0.2);
        }
        100% {
          box-shadow: 0 0 0 20px rgba(0, 0, 0, 0);
        }
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
      // Initialize the map centered on Indonesia
      var map = L.map("map").setView([-2.5, 118.0], 5); // Central coordinates of Indonesia

      // Add the base layer from OpenStreetMap
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: "&copy; OpenStreetMap contributors",
      }).addTo(map);

      // Function to extract earthquake locations from the table
      function extractEarthquakeLocationsFromTable() {
        var earthquakeLocations = [];
        var tableRows = document.querySelectorAll("#earthquakeTable tbody tr");
        tableRows.forEach(function (row) {
          var cells = row.querySelectorAll("td");
          var latitude = parseFloat(cells[0].textContent);
          var longitude = parseFloat(cells[1].textContent);
          var magnitude = parseFloat(cells[2].textContent);
          var location = cells[3].textContent;
          var status = cells[4].textContent.toLowerCase();
          earthquakeLocations.push({
            lat: latitude,
            lng: longitude,
            magnitude: magnitude,
            location: location,
            status: status,
          });
        });
        return earthquakeLocations;
      }

      // Add earthquake markers to the map
      function addEarthquakeMarkers() {
        var earthquakeLocations = extractEarthquakeLocationsFromTable();
        earthquakeLocations.forEach(function (earthquake) {
          var iconUrl;
          switch (earthquake.status) {
            case "error":
              iconUrl =
                'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="red"><animate attributeName="r" from="8" to="12" dur="1s" repeatCount="indefinite" /><animate attributeName="opacity" from="1" to="0" dur="1s" repeatCount="indefinite" /></circle></svg>';
              break;
            case "maintenance":
              iconUrl =
                'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="yellow"><animate attributeName="r" from="8" to="12" dur="1s" repeatCount="indefinite" /><animate attributeName="opacity" from="1" to="0" dur="1s" repeatCount="indefinite" /></circle></svg>';
              break;
            default:
              iconUrl =
                'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="blue"></circle></svg>';
              break;
          }

          var earthquakeIcon = L.icon({
            iconUrl: iconUrl,
            iconSize: [20, 20],
            iconAnchor: [10, 10], // Center the icon
          });

          var earthquakeMarker = L.marker([earthquake.lat, earthquake.lng], {
            icon: earthquakeIcon,
          }).addTo(map);

          // Bind a popup to each marker
          earthquakeMarker.bindPopup(
            "Earthquake Location: " +
              earthquake.location +
              "<br>Magnitude: " +
              earthquake.magnitude +
              "<br>Status: " +
              earthquake.status
          );
        });
      }

      // Call the function to add markers when the page loads
      window.onload = addEarthquakeMarkers;
    </script>

    <!-- Table containing earthquake locations -->
    <table id="earthquakeTable" style="display: none">
      <thead>
        <tr>
          <th>Latitude</th>
          <th>Longitude</th>
          <th>Magnitude</th>
          <th>Location</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>-6.2088</td>
          <td>106.8456</td>
          <td>5.0</td>
          <td>Jakarta</td>
          <td>Error</td>
        </tr>
        <tr>
          <td>-7.7972</td>
          <td>110.3705</td>
          <td>4.8</td>
          <td>Yogyakarta</td>
          <td>Maintenance</td>
        </tr>
        <tr>
          <td>-8.3405</td>
          <td>115.0920</td>
          <td>5.3</td>
          <td>Bali</td>
          <td>Normal</td>
        </tr>
        <!-- Add more rows as needed -->
      </tbody>
      </table>

      
   
    </body>
    </html>
