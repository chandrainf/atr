<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Master Kiosk</title>

    <link
      rel="shortcut icon"
      href="/assets/compiled/svg/favicon.svg"
      type="image/x-icon"
    />
    <link
      rel="shortcut icon"
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAiCAYAAADRcLDBAAAEs2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpQaXhlbFhEaW1lbnNpb249IjMzIgogICBleGlmOlBpeGVsWURpbWVuc2lvbj0iMzQiCiAgIGV4aWY6Q29sb3JTcGFjZT0iMSIKICAgdGlmZjpJbWFnZVdpZHRoPSIzMyIKICAgdGlmZjpJbWFnZUxlbmd0aD0iMzQiCiAgIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjIiCiAgIHRpZmY6WFJlc29sdXRpb249Ijk2LjAiCiAgIHRpZmY6WVJlc29sdXRpb249Ijk2LjAiCiAgIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiCiAgIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjItMDMtMzFUMTA6NTA6MjMrMDI6MDAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjItMDMtMzFUMTA6NTA6MjMrMDI6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJwcm9kdWNlZCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWZmaW5pdHkgRGVzaWduZXIgMS4xMC4xIgogICAgICBzdEV2dDp3aGVuPSIyMDIyLTAzLTMxVDEwOjUwOjIzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+Cjw/eHBhY2tldCBlbmQ9InIiPz5V57uAAAABgmlDQ1BzUkdCIElFQzYxOTY2LTIuMQAAKJF1kc8rRFEUxz9maORHo1hYKC9hISNGTWwsRn4VFmOUX5uZZ36oeTOv954kW2WrKLHxa8FfwFZZK0WkZClrYoOe87ypmWTO7dzzud97z+nec8ETzaiaWd4NWtYyIiNhZWZ2TvE946WZSjqoj6mmPjE1HKWkfdxR5sSbgFOr9Ll/rXoxYapQVik8oOqGJTwqPL5i6Q5vCzeo6dii8KlwpyEXFL519LjLLw6nXP5y2IhGBsFTJ6ykijhexGra0ITl5bRqmWU1fx/nJTWJ7PSUxBbxJkwijBBGYYwhBgnRQ7/MIQIE6ZIVJfK7f/MnyUmuKrPOKgZLpEhj0SnqslRPSEyKnpCRYdXp/9++msneoFu9JgwVT7b91ga+LfjetO3PQ9v+PgLvI1xkC/m5A+h7F32zoLXug38dzi4LWnwHzjeg8UGPGbFfySvuSSbh9QRqZ6H+Gqrm3Z7l9zm+h+iafNUV7O5Bu5z3L/wAdthn7QIme0YAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAJTSURBVFiF7Zi9axRBGIefEw2IdxFBRQsLWUTBaywSK4ubdSGVIY1Y6HZql8ZKCGIqwX/AYLmCgVQKfiDn7jZeEQMWfsSAHAiKqPiB5mIgELWYOW5vzc3O7niHhT/YZvY37/swM/vOzJbIqVq9uQ04CYwCI8AhYAlYAB4Dc7HnrOSJWcoJcBS4ARzQ2F4BZ2LPmTeNuykHwEWgkQGAet9QfiMZjUSt3hwD7psGTWgs9pwH1hC1enMYeA7sKwDxBqjGnvNdZzKZjqmCAKh+U1kmEwi3IEBbIsugnY5avTkEtIAtFhBrQCX2nLVehqyRqFoCAAwBh3WGLAhbgCRIYYinwLolwLqKUwwi9pxV4KUlxKKKUwxC6ZElRCPLYAJxGfhSEOCz6m8HEXvOB2CyIMSk6m8HoXQTmMkJcA2YNTHm3congOvATo3tE3A29pxbpnFzQSiQPcB55IFmFNgFfEQeahaAGZMpsIJIAZWAHcDX2HN+2cT6r39GxmvC9aPNwH5gO1BOPFuBVWAZue0vA9+A12EgjPadnhCuH1WAE8ivYAQ4ohKaagV4gvxi5oG7YSA2vApsCOH60WngKrA3R9IsvQUuhIGY00K4flQG7gHH/mLytB4C42EgfrQb0mV7us8AAMeBS8mGNMR4nwHamtBB7B4QRNdaS0M8GxDEog7iyoAguvJ0QYSBuAOcAt71Kfl7wA8DcTvZ2KtOlJEr+ByyQtqqhTyHTIeB+ONeqi3brh+VgIN0fohUgWGggizZFTplu12yW8iy/YLOGWMpDMTPXnl+Az9vj2HERYqPAAAAAElFTkSuQmCC"
      type="image/png"
    />

    <link rel="stylesheet" href="/assets/compiled/css/app.css" />
    <link rel="stylesheet" href="/assets/compiled/css/app-dark.css" />
    <link rel="stylesheet" href="/assets/compiled/css/iconly.css" />

    <!-- <link
      rel="stylesheet"
      href="/assets/extensions/simple-datatables/style.css"
    /> -->
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css"
    />

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    />

    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background-color: #ffffff;
        color: #333333;
      }

      .card {
        box-shadow: 3px 3px 3px 3px #dde8f1;
      }
      .map-container {
        position: relative;
        z-index: 999;
      }

      .navbar {
        position: fixed;
        width: 100%;
        background-color: #132144;
        z-index: 1000;
        padding: 10px 0;
      }

      .navbar-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        padding: 0 20px;
        box-sizing: border-box;
      }

      .navbar-logo {
        height: 50px;
      }

      .navbar-list {
        list-style-type: none;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-grow: 1;
      }

      .navbar-item {
        position: relative;
      }

      .navbar-link {
        display: block;
        color: white;
        text-align: right;
        padding: 14px 20px;
        text-decoration: none;
        transition: color 0.3s ease;
      }

      .navbar-item.active .navbar-link {
        border-bottom: 2px solid #fbcb1f;
      }

      .navbar-link:hover {
        color: #fbcb1f;
      }

      .navbar-link::before {
        content: "";
        position: absolute;
        width: 0;
        height: 2px;
        bottom: 0;
        left: 0;
        background-color: #fbcb1f;
        visibility: hidden;
        transition: all 0.3s ease-in-out;
      }

      .navbar-link:hover::before {
        visibility: visible;
        width: 100%;
      }

      /* Dropdown menu styling */
      .dropdown-menu {
        display: none;
        position: absolute;
        background-color: #ffffff;
        min-width: 160px;
        box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        top: 100%;
        left: 0;
        color: #333333;
      }

      .dropdown-item {
        width: 100%;
      }

      .dropdown-link:active {
        color: #dde8f1;
      }

      .dropdown-link {
        padding: 12px 16px;
        text-decoration: none;
        display: block;
        text-align: left;
        transition: background-color 0.3s ease, color 0.3s ease;
        color: #333333;
      }

      .dropdown-link:hover {
        background-color: #dde8f1;
        border-radius: 8px;
      }

      .dropdown-item.active .dropdown-link {
        color: #377dff;
        cursor: default; /* Prevents the pointer (hand) cursor */
      }

      .dropdown-item.active .dropdown-link:hover {
        background-color: transparent;
      }

      /* Show the dropdown menu on hover */
      .navbar-item.dropdown:hover .dropdown-menu {
        display: block;
      }

      /* New styles for responsive navbar */
      .hamburger {
        display: none;
        font-size: 24px;
        color: white;
        cursor: pointer;
      }

      @media (max-width: 576px) {
        .navbar-list {
          display: none;
          flex-direction: column;
          width: 100%;
          text-align: left;
          padding-left: 20px; /* Add padding to align to the left */
          align-items: flex-start; /* Align items to the left */
          position: absolute;
          top: 50px;
          left: 0;
          background-color: #132144;
          z-index: 999;
        }

        .navbar-list.active {
          display: flex;
          margin-top: 10px;
        }

        .navbar-item {
          width: 100%;
        }

        .hamburger {
          display: block;
          position: absolute;
          top: 10px;
          right: 20px;
          z-index: 1001; /* Ensure it's above other content */
        }
        .map-container {
          position: relative;
          z-index: 999;
        }

        .card {
          position: relative;
        }

        .has-sub .dropdown-menu {
          display: none;
          position: static;
          top: auto;
          left: auto;
          background-color: transparent;
          box-shadow: none;
          color: #ffe5e5;
        }

        .has-sub.active .dropdown-menu {
          display: block;
          margin-top: 0.5rem; /* Adjust spacing between items */
          color: white;
        }

        .dropdown-item {
          padding: 0.5rem 2rem;
          /* background-color: #333; */
          background-color: #132144;

          border-bottom: 1px solid #555;
        }

        .dropdown-item:last-child {
          border-bottom: none; /* Remove border on last item */
        }

        /* .dropdown-link:hover {
          padding: 12px 16px;
          text-decoration: none;
          display: block;
          text-align: left;
          transition: background-color 0.3s ease, color 0.3s ease;
          color: #333333;
        } */
      }

      /* Map container with default height */
      #map {
        /* width: 100%; */
        height: 600px; /* Default height */
      }

      /* Responsive height adjustments */
      @media (max-width: 576px) {
        #map {
          height: 400px; /* Adjust height for smaller screens */
        }
      }

      @media (min-width: 601px) and (max-width: 992px) {
        #map {
          height: 500px; /* Adjust height for medium screens */
        }
      }

      .legend {
        font-family: Arial, sans-serif;
        background: white;
        padding: 10px;
        border-radius: 5px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        font-size: medium;
      }

      .legend-item {
        display: flex; /* Make legend items flex containers */
        align-items: center; /* Vertically center items */
        margin: 0; /* Remove margin to ensure no extra space */
        padding: 0; /* Remove padding to ensure no extra space */
      }

      .legend-container {
        display: flex; /* Make legend container a flex container */
        flex-wrap: wrap;
        align-items: center; /* Vertically center items */
        gap: 10px; /* Space between flex items */
        margin: 0; /* Remove margin to ensure no extra space */
        padding: 0; /* Remove padding to ensure no extra space */
      }

      /* Custom dataTables */

      .dataTable-custom thead {
        background-color: #dde8f1;
        border-radius: 10px;
      }

      .dataTables_wrapper .dataTables_filter input, .dataTables_length select {
      color: #000000 !important;
      background-color: #ffffff !important;
      border: 1px solid #ccc !important;
      padding: 5px !important;
      border-radius: 3px !important;
     
    }

      /* .table-responsive {
        overflow-x: auto;
      } */

      .dataTable-custom {
        width: 100%;
        border-collapse: collapse;
      }
      @media (max-width: 576px) {
        .dataTable-custom {
          font-size: 0.775rem;
        }
      }

      .dataTable-custom th,
      .dataTable-custom td {
        padding: 8px;
        border: 1px solid #ddd;
        color: #333333;
      }

      .dataTable-custom th {
        background-color: #dde8f1;
      }

      .dataTables_wrapper .dataTables_info, .dataTables_paginate, .dataTables_length, .dataTables_length select, .dataTables_filter input {
        font-size: 14px !important;
      }
     

      @media (max-width: 576px) {
        .dataTables_wrapper .dataTables_info, .dataTables_paginate, .dataTables_length, .dataTables_length select, .dataTables_filter input {
        font-size: 12px !important;
      }
        
      }
    </style>
  </head>

  <body>
    <script src="/assets/static/js/initTheme.js"></script>
    <div id="app">
      <div id="main" class="layout-horizontal">
        <nav class="navbar">
          <div class="navbar-content">
            <a href="/index.html" class="menu-link">
              <img
                class="navbar-logo"
                src="/assets/compiled/svg/logoATR.svg"
                alt="Logo"
                height="46"
                width="135"
              />
            </a>
            <div class="hamburger" onclick="toggleMenu()">â˜°</div>

            <ul class="navbar-list gap-4">
              <li class="navbar-item">
                <a href="/index.html" class="navbar-link"
                  ><i class="me-2"
                    ><img
                      src="/assets/compiled/svg/iconDashboard.svg"
                      alt=""
                      height="20"
                      width="20" /></i
                  >Dashboard</a
                >
              </li>
              <li class="navbar-item active">
                <a href="/pages/master/kiosk.html" class="navbar-link"
                  ><i class="me-2"
                    ><img
                      src="/assets/compiled/svg/iconMaster.svg"
                      alt=""
                      height="20"
                      width="20" /></i
                  >Master</a
                >
              </li>
              <li class="navbar-item dropdown">
                <a href="#" class="navbar-link" id="report-link"
                  ><i class="me-2"
                    ><img
                      src="/assets/compiled/svg/iconReport.svg"
                      alt=""
                      height="20"
                      width="20" /></i
                  >Report</a
                >
                <ul class="dropdown-menu">
                  <li class="dropdown-item">
                    <a href="/pages/master/errorLog.html" class="dropdown-link"
                      >Error Log</a
                    >
                  </li>
                  <li class="dropdown-item">
                    <a
                      href="/pages/master/transaksi.html"
                      class="dropdown-link"
                    >
                      Transaksi</a
                    >
                  </li>
                  <li class="dropdown-item">
                    <a
                      href="/pages/master/kertasToner.html"
                      class="dropdown-link"
                    >
                      Kertas & Toner</a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </nav>

        <div class="map-container" style="margin-top: 70px">
          <div id="map"></div>

          <table class="table" id="kioskTable" style="display: none">
            <thead>
              <tr>
                <th>Kiosk Number</th>
                <th>Location</th>
                <th>Latitude</th>
                <th>Longitude</th>
                <th>Condition</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                <td>Jakarta</td>
                <td>-6.2088</td>
                <td>106.8456</td>
                <td>Normal</td>
              </tr>
              <tr>
                <td>2</td>
                <td>Surabaya</td>
                <td>-7.2575</td>
                <td>112.7521</td>
                <td>Error</td>
              </tr>
              <tr>
                <td>3</td>
                <td>Medan</td>
                <td>3.5952</td>
                <td>98.6722</td>
                <td>Maintenance</td>
              </tr>
              <tr>
                <td>4</td>
                <td>Yogyakarta</td>
                <td>-7.7972</td>
                <td>110.3705</td>
                <td>Maintenance</td>
              </tr>
              <tr>
                <td>5</td>
                <td>Bali</td>
                <td>-8.3405</td>
                <td>115.0920</td>
                <td>Normal</td>
              </tr>
              <tr>
                <td>6</td>
                <td>Padang</td>
                <td>-0.8990</td>
                <td>100.3543</td>
                <td>Error</td>
              </tr>
              <tr>
                <td>7</td>
                <td>Palembang</td>
                <td>-2.9814</td>
                <td>104.7642</td>
                <td>Normal</td>
              </tr>
              <tr>
                <td>8</td>
                <td>Ambon</td>
                <td>-3.6557</td>
                <td>128.1900</td>
                <td>Maintenance</td>
              </tr>
              <tr>
                <td>9</td>
                <td>Makassar</td>
                <td>-5.1477</td>
                <td>119.4327</td>
                <td>Normal</td>
              </tr>
              <tr>
                <td>10</td>
                <td>Manado</td>
                <td>1.4558</td>
                <td>124.8486</td>
                <td>Error</td>
              </tr>
              <tr>
                <td>11</td>
                <td>Central Kalimantan</td>
                <td>-0.7893</td>
                <td>113.9213</td>
                <td>Normal</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="row justify-content-center">
          <div class="col-12 px-3 mt-5">
            <!-- <section class="section" style="align-self: center;"> -->
            <div class="card border">
              <div class="card-header">
                <a class="" href="tambahKiosk.html"
                  ><button id="create" class="btn btn-primary">
                    Tambah Kiosk
                  </button></a
                >
              </div>
              <div class="card-body">
                <div class="table-responsive">
                  <table class="display dataTable-custom" id="table1">
                    <thead>
                      <tr>
                        <th>Nomor Kiosk</th>
                        <th>Lokasi</th>
                        <th>Status Kiosk</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>K2300012</td>
                        <td>
                          Kantor Pertanahan Kota Administratif Jakarta Pusat
                        </td>
                        <td>Aktif</td>
                        <td>
                          <a class="" href="detailKiosk.html">Detail</a>
                        </td>
                      </tr>
                      <tr>
                        <td>K2300013</td>
                        <td>Kantor Pertanahan Kota Surabaya I</td>
                        <td>Aktif</td>
                        <td>
                          <a class="" href="">Detail</a>
                        </td>
                      </tr>
                      <tr>
                        <td>K2300014</td>
                        <td>Kantor Pertanahan Kota Surabaya II</td>
                        <td>Aktif</td>
                        <td>
                          <a class="">Detail</a>
                        </td>
                      </tr>
                      <tr>
                        <td>K2300015</td>
                        <td>
                          Kantor Wilayah Badan Pertanahan Nasional Provinsi
                          Kalimantan Timur
                        </td>
                        <td>Aktif</td>
                        <td>
                          <a class="">Detail</a>
                        </td>
                      </tr>
                      <tr>
                        <td>K2300016</td>
                        <td>
                          Kantor Wilayah Badan Pertanahan Nasional Provinsi
                          Kalimantan Timur
                        </td>
                        <td>Aktif</td>
                        <td>
                          <a class="">Detail</a>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="/assets/static/js/components/dark.js"></script>
    <script src="/assets/extensions/perfect-scrollbar/perfect-scrollbar.min.js"></script>

    <script src="/assets/static/js/pages/horizontal-layout.js"></script>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", initDropdowns);
      window.addEventListener("resize", initDropdowns);

      function initDropdowns() {
        const dropdowns = document.querySelectorAll(".navbar-item.dropdown");

        dropdowns.forEach((dropdown) => {
          // Clear previous event listeners
          dropdown.replaceWith(dropdown.cloneNode(true));
        });

        const newDropdowns = document.querySelectorAll(".navbar-item.dropdown");

        if (window.innerWidth > 576) {
          newDropdowns.forEach((dropdown) => {
            dropdown.addEventListener("mouseenter", function () {
              this.classList.add("active");
            });
            dropdown.addEventListener("mouseleave", function () {
              this.classList.remove("active");
            });
          });
        } else {
          newDropdowns.forEach((dropdown) => {
            dropdown.classList.add("has-sub");
            const link = dropdown.querySelector(".navbar-link");
            link.addEventListener("click", function (e) {
              e.preventDefault();
              dropdown.classList.toggle("active");
            });
          });
        }
      }

      function toggleMenu() {
        var navbarList = document.querySelector(".navbar-list");
        var mapContainer = document.querySelector(".map-container");
        var card = document.querySelector(".card");

        navbarList.classList.toggle("active");

        if (navbarList.classList.contains("active")) {
          mapContainer.style.top = `${navbarList.clientHeight}px`;
          card.style.top = `${navbarList.clientHeight}px`;
        } else {
          mapContainer.style.top = "0";
          card.style.top = "0";
        }
      }

      $(document).ready(function () {
        var table = $("#table1").DataTable();
      });

      // Initialize the map
      var map = L.map("map");

      // Add a tile layer
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution:
          '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
      }).addTo(map);

      // Function to adjust map view based on screen size
      function setMapView() {
        if (window.innerWidth <= 576) {
          map.setView([-2.5, 118.0], 3); // Coordinates and zoom for small screens
        } else if (window.innerWidth <= 992) {
          map.setView([-2.5, 118.0], 4); // Coordinates and zoom for medium screens
        } else {
          map.setView([-2.5, 118.0], 5); // Coordinates and zoom for large screens
        }
      }

      // Initial call to set the correct size
      setMapView();

      // Adjust the map view on window resize
      window.addEventListener("resize", function () {
        setMapView();
        map.invalidateSize();
      });

      // Parse the table data into a kiosks array
      var kiosks = [];
      var totalKiosks = 0;
      var activeKiosks = 0;
      var uniqueLocations = new Set();

      $("#kioskTable tbody tr").each(function () {
        var row = $(this);
        var condition = row.find("td:eq(4)").text();
        var status = condition === "Error" ? "Inactive" : "Active";
        var location = row.find("td:eq(1)").text();

        var kiosk = {
          kiosk_number: row.find("td:eq(0)").text(),
          location: location,
          latitude: parseFloat(row.find("td:eq(2)").text()),
          longitude: parseFloat(row.find("td:eq(3)").text()),
          condition: condition,
          status: status,
        };
        kiosks.push(kiosk);

        totalKiosks++;
        uniqueLocations.add(location);
        if (status === "Active") {
          activeKiosks++;
        }
      });

      function addKioskMarkers() {
        kiosks.forEach(function (kiosk) {
          if (kiosk.condition !== "Normal") return; // Only show kiosks with Normal condition

          var iconUrl =
            'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="blue"></circle></svg>';

          var kioskIcon = L.icon({
            iconUrl: iconUrl,
            iconSize: [20, 20],
            iconAnchor: [10, 10], // Center the icon
          });

          var kioskMarker = L.marker([kiosk.latitude, kiosk.longitude], {
            icon: kioskIcon,
          }).addTo(map);

          // kioskMarker.bindPopup(
          //   `<b>Kiosk: ${kiosk.kiosk_number}</b><br>Condition: ${kiosk.condition}<br>Location: ${kiosk.location}`
          // );
        });
      }

      addKioskMarkers();

      // Add a legend to the map
      var legend = L.control({ position: "bottomleft" });

      legend.onAdd = function (map) {
        var div = L.DomUtil.create("div", "legend");
        div.innerHTML +=
          "<b>Total Locations :</b> " +
          uniqueLocations.size +
          " Kiosk" +
          "<br>";
        div.innerHTML +=
          "<b>Total Kiosks &emsp;&nbsp;:</b> " +
          totalKiosks +
          " Lokasi" +
          "<br>";
        div.innerHTML +=
          "<b>Active Kiosks &nbsp;&nbsp:</b> " +
          activeKiosks +
          " Kiosk" +
          "<br>";
        return div;
      };

      legend.addTo(map);
    </script>

    <script src="/assets/static/js/components/dark.js"></script>
    <script src="/assets/extensions/perfect-scrollbar/perfect-scrollbar.min.js"></script>

    <script src="assets/compiled/js/app.js"></script>
    <!-- <script src="/assets/extensions/simple-datatables/umd/simple-datatables.js"></script>
    <script src="/assets/static/js/pages/simple-datatables.js"></script> -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  </body>
</html>
